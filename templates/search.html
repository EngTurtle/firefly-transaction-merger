{% extends "base.html" %}

{% block title %}Search - Firefly Transaction Merger{% endblock %}

{% block content %}
<div class="search-page">
    <h2>Find Matching Transactions</h2>

    <form hx-post="/search" hx-target="#results" hx-swap="innerHTML" class="search-form">
        <div class="form-row">
            <div class="form-group">
                <label for="start_date">Start Date</label>
                <input type="date" id="start_date" name="start_date" value="{{ start_date }}" required>
            </div>
            <div class="form-group">
                <label for="end_date">End Date</label>
                <input type="date" id="end_date" name="end_date" value="{{ end_date }}" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="account_id">Filter by Account (optional)</label>
                <select id="account_id" name="account_id" multiple size="4">
                    {% for account in accounts %}
                    <option value="{{ account.id }}">{{ account.attributes.name }}</option>
                    {% endfor %}
                </select>
                <small>Hold Ctrl/Cmd to select multiple. Leave empty for all accounts.</small>
            </div>
            <div class="form-group">
                <label for="business_days">Max Business Days Apart</label>
                <input type="number" id="business_days" name="business_days" value="5" min="1" max="30" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="limit">Number of Deposits to Search</label>
                <input type="number" id="limit" name="limit" value="50" min="1" max="500" required>
            </div>
            <div class="form-group">
                <label for="order">Sort Order</label>
                <select id="order" name="order">
                    <option value="desc">Newest first</option>
                    <option value="asc">Oldest first</option>
                </select>
            </div>
        </div>

        <button type="submit" hx-disabled-elt="this">
            <span class="htmx-indicator">Searching...</span>
            <span class="default-text">Search for Matches</span>
        </button>
    </form>

    <div id="results" class="results-container">
        <p class="placeholder">Configure search parameters and click "Search for Matches"</p>
    </div>
</div>
{% endblock %}
